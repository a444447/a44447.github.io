---
title: "仿真调研"
date: 2024-07-02T15:00:23+08:00
categories: [研究生,仿真]
---

## 3d Gaussain splatting

首先要直到什么是 **splatting**。

splatting是一种主动的体渲染方法——计算出每个发光例子如何影响像素。

## nerf

*nerf*使用神经网络来隐式存储3D信息。最原始的版本并没有泛化能力，一个模型只能存储一个3D信息。

在 **训练**的时候，使用的是给定静止场景下的若干图片。

### 基础

下面的讨论基于最原始的nerf论文



*nerf*的输入是一个5D向量——$(x,y,z,\theta, \phi )$，其中$\theta$和$\phi$是位姿。**实际上输入的是粒子的空间位姿$(x,y,z,\theta, \phi )$**

*nerf*的输出是一个4D向量——颜色与密度。**输出的是粒子的对应颜色以及密度**。

{{< notice info >}}
到底什么是**粒子**?

首先要先了解一下体渲染技术，它最初是应用在CG领域，用于解决云、烟、果冻等等非刚体的渲染建模问题。其思想就是将物体抽象为一团粒子群，当光线穿过时，就是光子与粒子群发生碰撞的过程。

在NeRF中:

+ 假设物体是一团自发光的粒子;
+ 粒子有密度和颜色；
+ 外射光和内射光抵消；(外射光是光子被弹射，内射光是其他方向弹射来的粒子)
+ 多个粒子被渲染为指定角度的图片。

所以说，模型的输入实际上就是: 将物体进行稀疏表示的单个粒子的位姿

模型的输出就是：该粒子的密度和颜色。
{{< /notice >}}

现在的问题是，我们该如何采集这些粒子呢？

首先考虑相机模型，我们假设现实的空间坐标中有一个发光粒子，它的坐标是(x,y,z)，它发射的光线通过 **相机模型**成为了图片上的像素坐标 **(u,v)**，粒子的颜色就是像素的颜色。

![image-20240702165136486](https://obsdian-1304266993.cos.ap-chongqing.myqcloud.com/typora/image-20240702165136486.png)

这是一个 **正向的过程**，现在，如何把一张图片，通过它的像素点来推算出粒子呢？这是一个反向的过程。NeRF中的做法是估计出每个像素点所对应的 **射线**。

![image-20240702165401296](https://obsdian-1304266993.cos.ap-chongqing.myqcloud.com/typora/image-20240702165401296.png)

---

在实际输入的时候，还考虑了 **位置编码**。



----

**loss计算**

采用的是自监督的方式:

*ground truth是某一个像素的RGB,将该像素对应光线上的所有粒子颜色进行求和。之后，像素颜色的预测值就是粒子的颜色和，然后将粒子的颜色和像素颜色作MSE：*

![image-20240702170631709](https://obsdian-1304266993.cos.ap-chongqing.myqcloud.com/typora/image-20240702170631709.png)
