# TCP/IP网络模型

同一个设备上的进程间通信有很多方式，比如管道、共享内存、消息队列、信号等。而不同设备之间的通信就依赖网络协议。

网络协议是分层的，每层有各自的作用。

> 应用层运行在用户态，传输层及以下工作在内核态

## 传输层

传输层,「Transport Layer」是为应用层提供网络支持的。它上面一般运行两个协议，TCP与UDP。

+ TCP是可靠传输的，它实现了很多特性比如拥塞控制、流量控制、超时重传。所以说它是可靠的协议
+ UDP只是负责把数据包发出，但是不保证一定能抵达对方。但是它没有复杂的特性所以它的实时性也更好。



应用要传输的数据可能会很大，一旦传输层的数据包超过了MSS(TCP最大报文长度)，就会吧数据包分块，这样即使中途传输的时候发生损坏或者丢包，也只用传输这个分块——TCP中这个分块叫TCP segment(段)

当设备作为 *接收方* ，传输层要负责把数据包传给应用，但是一个机器上可能有很多个应用在等待接受或者传输数据，这时候就需要用 端口来区分。 传输层的报文中会携带端口号，因此接收方可以识别出这是发给哪个应用的。



## 网络层

传输层负责的事情很单一，就是为上层的应用层提供服务（传递数据，发送数据），它们并不负责将数据从一个设备发送到另一个设备。

实际的传输功能由网络层实现。网络层常用的协议是IP协议。它会把传输层的报文当作数据部分，然后加上自己的IP头组成IP报文——如果IP报文超过了MTU，会再次分片。

![img](/Users/afourseven/blog/interview-trivia-question-master/assets/12.jpg)

世界上有众多的设备，为了找到对方，网络层用IP地址给设备编号。对于IPv4,它是32位的，有两部分：网络号与主机号。

如何找到划分的部分，就要依赖子网掩码（IP地址与子网掩码按位作and运算，得到的就是网络号。

IP协议还负责 **路由**。在实际上，两个设备不可能是通过两个网线直接连接的，其中有很多网关、路由器、交换机。当数据包到达一个网络节点，需要路由算法告诉下一步路经。

## 网络接口层

IP报文接下来会继续交给下层的网络接口层，在IP头部加上MAC头部，封装为数据帧。





## 键入网址到网页显示，期间发生了什么

